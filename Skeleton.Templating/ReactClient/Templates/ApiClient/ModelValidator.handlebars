// generated by a tool
import { FormikErrors, setIn } from 'formik';

{{#each OperationsWithUI}}
{{#if ChangesData}}
    {{#unless IsDelete}}
{{#if UsesModel}}
import { {{ModelTypeName}} } from "./{{ModelTypeName}}";
{{else}}
import { {{cs_name RelatedType.Name}}{{FriendlyName}}State } from './{{cml_case RelatedType.Name}}{{FriendlyName}}';
{{/if}}
    {{/unless}}        
{{/if}}
{{/each}}

export class {{cs_name Name}}Validate {

	{{#each OperationsWithUI}}
	{{#if ChangesData}}
        {{#unless IsDelete}}
	{{#if UsesModel}}
	public validate{{cs_name BareName}}(state: {{cs_name Name}}{{OperationName}}Model) : FormikErrors<{{cs_name Name}}{{OperationName}}Model> {
		let errors: FormikErrors<{{cs_name Name}}{{OperationName}}Model> = {};

		{{#each UserProvidedParameters}}
		{{#if RelatedTypeField.IsRequired}}
		{{#if IsBoolean}}
		if (state.{{cml_case Name}} == null){
		{{else}}
		if (!state.{{cml_case Name}}){
		{{/if}}
			errors.{{cml_case Name}} = "{{hmn}} is required";
		}
		{{/if}}
		{{/each}}

        return errors;
	}
	
	{{else}}
	public validate{{cs_name BareName}}(state: {{cs_name RelatedType.Name}}{{FriendlyName}}State): FormikErrors<{{cs_name RelatedType.Name}}{{FriendlyName}}State> {
        console.log('validating');
        let errors: FormikErrors<{{cs_name RelatedType.Name}}{{FriendlyName}}State> = {};

		{{#each UserProvidedParameters}}
            {{#if IsCustomTypeOrCustomArray}}
                {{#each ClientCustomType.Fields}}
                    {{#if IsRequired}}
                        {{#if IsBoolean}}
            if (!state.{{cml_case ../Name}} || state.{{cml_case ../Name}}.{{cml_case Name}} == null) {
                        {{else}}
                            {{#if IsInt}}
            if (!state.{{cml_case ../Name}} || state.{{cml_case ../Name}}.{{cml_case Name}} == null) {
                            {{else}}
            if (!state.{{cml_case ../Name}} || !state.{{cml_case ../Name}}.{{cml_case Name}}) {
                            {{/if}}
                        {{/if}}
                errors = setIn(errors, '{{cml_case ../Name}}.{{cml_case Name}}', '{{hmn Name}} is required');   
            }            
                    {{/if}} 
                {{/each}}
            {{else}}
                {{#if RelatedTypeField.IsRequired}}
                    {{#if IsBoolean}}
            if (state.{{cml_case Name}} == null){
                    {{else}}
            if (!state.{{cml_case Name}}){
                    {{/if}}
               errors.{{cml_case Name}} = "{{hmn}} is required";
            }
                {{/if}}
            {{/if}}
		{{/each}}

        return errors;
    }

	{{/if}}
        {{/unless}}
    {{/if}}
	{{/each}}
}